<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
	<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
</head>
<body>
<p>こんにちは！</p>
<% out.println(new java.util.Date()); %>
<%!
int add(int a, int b){
	return a+b;
}
%>

<p>1+2=<%=add(1,2) %></p>
<p>1+2=<%=add(3,4) %></p>

<%! int countA=0; %>
<%
	int countB=0;
countA++;
countB++;
%>
<p>宣言による変数 dountA= <%=countA %></p>
<p>スクリプトレットによる変数 countB=<%=countB %></p>
<p><% out.println(Math.random()); %></p>
<p><%=Math.random() %></p>
<p>お名前を入力してください。</p>
<form method="post" action="greeting-out.jsp">
<input type="text" name="user">
<input type="submit" value="確定">
</form>
<% request.setCharacterEncoding("UTF-8"); %>
<p>こんにちは、<%=request.getParameter("user") %>さん！</p>

<form method="post" action="total-out.jsp">
<input type="text" name="price">
円x
<input type="text" name="count">
個+送料
<input type="text" name="delivery">
円=
<input type="text" value="計算">
</form>


<%@page errorPage="total-error.jsp" %>
<%
request.setCharacterEncoding("UTF-8");
int price =Integer.parseInt(request.getParameter("price"));
int count =Integer.parseInt(request.getParameter("count"));
int delivery =Integer.parseInt(request.getParameter("delivery"));
%>
<%=price %>円x<%=count %>個+送料<%=delivery %>円=
<%=price*count+delivery %>円


<%@page isErrorPage="true" %>
<p>数値を入力してください。</p>
<button onclick="history.back()">戻る</button>
<br>
<p><%=exception %></p>
<table border=1>
<tr>
	<td><strong>エラーメッセージ</strong></td>
	<td><%=exception.getMessage() %></td>
</tr>
<tr>
	<td><strong>例外を文字列に変換</strong></td>
	<td><%= exception.getMessage() %></td>
</tr>
<tr>
	<td><strong>例外を文字列に変換</strong></td>
	<td><%=exception.toString() %></td>
</tr>
<tr>
	<td><strong>スタックトレース</strong></td>
	<td>
<%
	exception.printStackTrace(new java.io.PrintWriter(out));
%>
</td></tr>
</table>
</body>
</html>